<!DOCTYPE html>
<html lang="en">
    <head>
        <link href="https://fonts.googleapis.com/css2?family=Arimo:ital,wght@0,400..700;1,400..700&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
        <title>{% block title %}{% endblock %}</title>
    </head>
    <body class="ld-s">
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light text-dark bg-light fixed-top ld ld-nav">
        <div class="container">
            <a class="navbar-brand" href="#">TicketTurbo</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="{% url 'search' %}">Search</a>
      </li>
        {% if not user.is_authenticated %}
      <li class="nav-item">
        <a class="nav-link" href="{% url 'login_view' %}">Login</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'createaccount' %}">Create Account</a>
      </li>
            {% else %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'logout_view' %}">Logout</a>
              </li>
        {% endif %}
        <li class="nav-item">
            <form action="{% url 'ld_set' %}" method="post">
                {% csrf_token %}
                <input type="hidden" value="{% block url %}{% endblock %}" name="next">
                <input type="submit" id="light-dark" class="btn btn-outline-dark" value="Dark Mode">
            </form>
        </li>
    </ul>
  </div>
        </div>
</nav>
    </div>

    {% block content %}
    {% endblock %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src=" https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js "></script>
    <script>
        $(document).ready(function(){
            check();
        });
        function check(){
            $.ajax({
                url: '{% url 'ld_get' %}',
                type: 'POST',
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function (response) {
                    console.log(response.mode);
                    if (response.mode === 'light') {
                        light();
                    }
                    else if(response.mode === 'dark'){
                        dark();
                    }
                }
            });
        }
        function dark(){
            let items = $(".ld");
            items.removeClass("text-dark");
            items.removeClass("bg-light");
            items.addClass("text-light");
            items.addClass('bg-dark');
            let items_ = $(".ld-s");
            items_.removeClass("text-dark");
            items_.removeClass("bg-light");
            items_.addClass("text-light");
            items_.addClass('bg-secondary');
            let links = $("a")
            links.addClass("link-light")
            let navbar = $(".ld-nav");
            navbar.removeClass("navbar-light");
            navbar.addClass("navbar-dark");
            let button = $("#light-dark");
            button.removeClass('btn-outline-dark');
            button.addClass('btn-light');
            button.attr('value','Light Mode');
        }
        function light(){
            let items = $(".ld");
            items.addClass("text-dark");
            items.addClass("bg-light");
            items.removeClass("text-light");
            items.removeClass('bg-dark');
            let items_ = $(".ld-s");
            items_.addClass("text-dark");
            items_.addClass("bg-light");
            items_.removeClass("text-light");
            items_.removeClass('bg-secondary');
            let links = $("a")
            links.removeClass("link-light")
            let navbar = $(".ld-nav");
            navbar.addClass("navbar-light");
            navbar.removeClass("navbar-dark");
            let button = $("#light-dark");
            button.addClass('btn-outline-dark')
            button.removeClass('btn-light')
            button.attr('value','Dark Mode');
        }
    </script>
    {% block script %}
    {% endblock %}
    </body>
</html>